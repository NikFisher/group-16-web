{"remainingRequest":"/Users/nicholasfisher/group-16-web/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nicholasfisher/group-16-web/client/src/views/Shop.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nicholasfisher/group-16-web/client/src/views/Shop.vue","mtime":1571758716821},{"path":"/Users/nicholasfisher/group-16-web/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nicholasfisher/group-16-web/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Api } from '@/Api'\nimport ItemItem from '@/components/ItemItem'\n\nexport default {\n  data() {\n    return {\n      items: [],\n      player: '',\n      shopLength: 1\n    }\n  },\n\n  mounted() {\n    this.getItems()\n    this.getPlayer()\n  },\n\n  methods: {\n    getItems() {\n      Api.get('/shops/10')\n        .then(reponse => {\n          this.items = reponse.data.items\n        })\n        .catch(error => {\n          this.items = []\n          this.shopLength = this.items.length\n          console.log(error)\n        })\n        .then(() => {\n          // This code is always executed (after success or error).\n        })\n    },\n    deleteItem(id) {\n      var index = this.items.findIndex(item => item._id === id)\n      if (this.player.currency >= this.items[index].price) {\n        Api.delete(`/shops/10/items/${id}`)\n          .then(response => {\n            console.log(response.data.message)\n            this.player.defense += this.items[index].defenseValue\n            this.player.damage += this.items[index].attackValue\n            this.player.currency = this.player.currency - this.items[index].price\n\n            Api.patch('/players/1', this.player)\n              .then(response => {\n                this.player.push(response.data)\n              })\n              .catch(error => {\n                console.log(error)\n              })\n            if (this.items[index].name == 'Golden Mop') {\n              this.items.splice(index, 1)\n              this.shopLength = 1\n              console.log(this.shopLength)\n            } else if (this.items[index].name !== 'Golden Mop') {\n              this.items.splice(index, 1)\n              this.shopLength = this.items.length\n              console.log(this.shopLength)\n            }\n          }\n          )\n          .catch(error => {\n            console.log(error)\n          })\n      } else {\n        alert('Not enough money')\n      }\n    },\n    getPlayer() {\n      Api.get('/players/1')\n        .then(response => {\n          this.player = response.data\n        })\n        .catch(error => {\n          this.player = error\n        })\n    },\n    checkSuperSaiyan() {\n      if (this.shopLength === 0) {\n        alert('You have reached EVEN FURTHER BEYOND, Check the shop for a new legendary item')\n\n        var legendaryItem = {\n          name: 'Golden Mop',\n          description: \"The golden mop originally belonged to Ner'smutz, the janitor-God \" +\n          'Whomsoever takes up this mop wield power eternal' + '. ' +\n          'Just as the mop rends flesh so must power scar the spirit',\n          type: 'attack',\n          attackValue: 400,\n          defenseValue: 100,\n          price: 500\n        }\n        Api.post('/shops/10/items', legendaryItem)\n\n          .then(response => {\n\n          })\n          .catch(error => {\n            console.log(error)\n          })\n      }\n    }\n  },\n  components: {\n    ItemItem\n  }\n}\n",{"version":3,"sources":["Shop.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Shop.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div>\n    <h1>Welcome to the shop</h1>\n    <b-button href = \"/\" v-on:click=\"checkSuperSaiyan()\">Back to Home Page</b-button>\n    <div class=\"items\">\n    <h1>List of {{ items.length }} items</h1>\n    <h2>You have {{player.currency}} kronordollars</h2>\n    <b-list-group>\n      <item-item v-for=\"item in items\" :key=\"item._id\" :item=\"item\" @delete-item=\"deleteItem\"></item-item>\n    </b-list-group>\n  </div>\n\n</div>\n\n</template>\n\n<script>\nimport { Api } from '@/Api'\nimport ItemItem from '@/components/ItemItem'\n\nexport default {\n  data() {\n    return {\n      items: [],\n      player: '',\n      shopLength: 1\n    }\n  },\n\n  mounted() {\n    this.getItems()\n    this.getPlayer()\n  },\n\n  methods: {\n    getItems() {\n      Api.get('/shops/10')\n        .then(reponse => {\n          this.items = reponse.data.items\n        })\n        .catch(error => {\n          this.items = []\n          this.shopLength = this.items.length\n          console.log(error)\n        })\n        .then(() => {\n          // This code is always executed (after success or error).\n        })\n    },\n    deleteItem(id) {\n      var index = this.items.findIndex(item => item._id === id)\n      if (this.player.currency >= this.items[index].price) {\n        Api.delete(`/shops/10/items/${id}`)\n          .then(response => {\n            console.log(response.data.message)\n            this.player.defense += this.items[index].defenseValue\n            this.player.damage += this.items[index].attackValue\n            this.player.currency = this.player.currency - this.items[index].price\n\n            Api.patch('/players/1', this.player)\n              .then(response => {\n                this.player.push(response.data)\n              })\n              .catch(error => {\n                console.log(error)\n              })\n            if (this.items[index].name == 'Golden Mop') {\n              this.items.splice(index, 1)\n              this.shopLength = 1\n              console.log(this.shopLength)\n            } else if (this.items[index].name !== 'Golden Mop') {\n              this.items.splice(index, 1)\n              this.shopLength = this.items.length\n              console.log(this.shopLength)\n            }\n          }\n          )\n          .catch(error => {\n            console.log(error)\n          })\n      } else {\n        alert('Not enough money')\n      }\n    },\n    getPlayer() {\n      Api.get('/players/1')\n        .then(response => {\n          this.player = response.data\n        })\n        .catch(error => {\n          this.player = error\n        })\n    },\n    checkSuperSaiyan() {\n      if (this.shopLength === 0) {\n        alert('You have reached EVEN FURTHER BEYOND, Check the shop for a new legendary item')\n\n        var legendaryItem = {\n          name: 'Golden Mop',\n          description: \"The golden mop originally belonged to Ner'smutz, the janitor-God \" +\n          'Whomsoever takes up this mop wield power eternal' + '. ' +\n          'Just as the mop rends flesh so must power scar the spirit',\n          type: 'attack',\n          attackValue: 400,\n          defenseValue: 100,\n          price: 500\n        }\n        Api.post('/shops/10/items', legendaryItem)\n\n          .then(response => {\n\n          })\n          .catch(error => {\n            console.log(error)\n          })\n      }\n    }\n  },\n  components: {\n    ItemItem\n  }\n}\n</script>\n\n<style>\n.example-col {\n  padding-top: .75rem;\n  padding-bottom: .75rem;\n  background-color: whitesmoke;\n  border: 2px solid lightgray;\n}\n</style>\n"]}]}